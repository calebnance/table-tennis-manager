$(document).ready(function(){function s(s,a){""==a?($(s).closest(".form-group").addClass("has-error").removeClass("has-success"),o=!1):$(s).closest(".form-group").removeClass("has-error").addClass("has-success")}function a(){$("#acco_password").prev("label").find("span").html("<small> - Passwords do not match</small>"),$("#acco_password").closest(".form-group").addClass("has-error").removeClass("has-success"),$("#acco_password2").closest(".form-group").addClass("has-error").removeClass("has-success")}function e(){$("#acco_password").prev("label").find("span").html("<small> - Passwords match!</small>"),$("#acco_password").closest(".form-group").removeClass("has-error").addClass("has-success"),$("#acco_password2").closest(".form-group").removeClass("has-error").addClass("has-success")}var r,o=!0;$("input.required").on("change blur",function(s){s.preventDefault(),$blurThis=$(this),$.validateForm(!1,$blurThis)}),$("input.required").on("input",function(s){s.preventDefault(),$inputThis=$(this),clearTimeout(r),r=setTimeout(function(s){$.validateForm(!1,$inputThis)},2e3)}),$("#submit-create-account").on("click",function(s){s.preventDefault(),$.validateForm(!0,"")}),$.validateForm=function(r,l){$fields=$("#create_account_form .required");var t=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/gim;""!==l?s(l,$(l).val()):o=!0,$.each($fields,function(l,c){var i=$(c).val(),d=$(c).attr("name");if(r&&s(c,i),""!==i||1==r)if("acco_email"==d)t.test(i)?($(c).prev("label").find("span").html("<small> - Is valid!</small>"),$(c).closest(".form-group").addClass("has-success").removeClass("has-error")):($(c).prev("label").find("span").html("<small> - Not valid!</small>"),$(c).closest(".form-group").addClass("has-error").removeClass("has-success"));else if("acco_password"==d){var n=$("#acco_password2").val();""!==n&&(i!==n?a():e())}else if("acco_password2"==d){var u=$("#acco_password").val();""!==u&&(i!==u?a():e())}else""==i?($(c).closest(".form-group").addClass("has-error").removeClass("has-success"),o=!1):$(c).closest(".form-group").removeClass("has-error").addClass("has-success")}),r&&o&&$.ajax({url:"create-account.php",type:"POST",dataType:"json",data:$("#create_account_form").serialize()}).done(function(s){$("#message-area").hide().html('<div class="alert alert-'+s.type+' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+s.msg+"</div>").slideDown()}).fail(function(){$("#message-area").hide().html('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>Something went wrong, please reload the page and try again.</div>').slideDown()})}});
